# 开发总结

## 1. 本次收获

在本次项目中，我选择了使用 **Spring Boot** 作为后端框架、**Vue 3** 作为前端框架，并通过 **Python 爬虫** 进行数据采集，最终完成了整个项目的开发。总结如下：

- **为什么选择 Spring Boot 作为后端框架**
  - Spring Boot 提供了非常丰富的功能和良好的开发体验，能够快速构建一个微服务架构的 Web 应用。它内置了很多常用的功能，比如 RESTful API 的支持、数据库操作、用户验证等。Spring Boot 的自动配置和约定优于配置的原则使得我可以将精力更多地集中在业务逻辑的实现上，而不是配置和环境的搭建。

- **为什么选择 Vue 3 作为前端框架**  
  - Vue 3 提供了响应式的数据绑定和组件化的开发模式，特别适合开发复杂的单页应用（SPA）。它轻量且易于上手，与后端的对接也非常方便。Vue 3 的 Composition API 更加强大，提供了更清晰、更灵活的代码结构，使得整个项目更加易于维护和扩展。

- **为什么选择 Python 爬虫进行数据采集**  
  - Python 是一个非常强大的编程语言，其丰富的第三方库（如 `requests`、`BeautifulSoup`、`Selenium` 等）使得数据采集工作变得非常高效。通过 Python 爬虫，能够迅速获取目标网站的商品信息，并处理价格变化、商品图片等，完美满足了项目的需求。

- **收获总结**  
  - 在此次开发前，我在课程中经历的项目开发大作业基本上都以组队形式完成，虽然做的项目比较多，但没有完整经历过一个项目从零开始搭建框架，完成各个部分的整个流程。
  - 本次开发通过独立完成项目，对爬虫、前后端框架搭建、项目打包等等都提升了自己的了解，前后端的知识和技术栈的搭建让我对整个开发流程有了更深入的理解，能够更加高效地开发和部署产品。
  - 不足之处：由于时间有限，原计划优化爬虫速度与优化分类，加密等服务功能没有实现，由于时间紧张，docker上面的爬虫似乎不能正常运行。可以本地试爬取，项目视频也会演示本地成功爬取的效果。
  - 比较满意的地方：
    - 增加了一些额外的筛选功能。
    - 数据库存储，完成了一个自动爬取+下载图片+自动判断并压缩图片+传完图自动删除，减少垃圾文件的逻辑。
    - 储存了商品链接，方便使用的时候随时跳转。
    - 添加了个人主页方便管理信息，这里其实可以扩展很多功能。
    - 本次花了很多时间修改前端，个人感觉还是比较美观的，ui和商品组件会适配屏幕宽度移动，logo用的是我的猫，没别的意思就炫耀一下。

## 2. 常见 Bug 总结

以下是一些在开发过程中遇到的常见 bug，总结如下：

- **后端跨域问题**
  - 在使用 Spring Boot 开发后端时，前后端分离导致了跨域问题。通过配置`WebConfig.java`并添加了相关依赖，来确保前端可以正常访问后端 API。

- **前端组件冲突问题**  
  - 前端由于抽象程度比较高，有一些组件可能出现互相冲突，以及各种各样的异常行为。例如，`echart`组件的图表加载问题，如果需要在弹窗中加载图表，

- **数据结构设置问题**  
  - 数据表的结构经过了多次设计，并且在后期造成了一点麻烦，例如，原设计中我的产品表不准备存最新价格，而通过历史价格表来关联价格。
但后续发现在数据请求的时候，不添加最新价格属性会对实际上获取与筛选数据的操作造成很大麻烦，因此，后续添加了最新价格，并且，添加了约束来保证历史价格表的更新会同步更新产品表的价格。

- **数据结构设置问题**
  - flask服务即爬虫不工作，有可能是因为爬虫使用的端口被占用，在`README.md`内说明的配置文件中修改一个没被占用的端口即可。
- **爬虫反爬虫机制问题**  
  - 在进行商品数据采集时，部分网站启用了反爬虫机制，尤其是淘宝京东等主流网站，频繁的验证码机制与登录机制导致爬虫无法正常抓取数据。
  - 在选择了反爬机制较弱的网站后，通过增加请求头、使用代理 IP 和定时请求的方式，成功绕过了反爬虫机制。  
  - 此外，由于不同网站对价格、图片的加载方式不同，部分存在懒加载，所以在尝试`Request`获取数据失败后，还是选择了使用`Selenium`，它的速度较慢，但通过这种方法才能正常获取图片。如果觉得执行的时候慢，可以找到爬虫文件修改一下等待时间和滑动次数。

## 3. 文件架构

项目的文件架构分为前端、后端和爬虫服务三部分，下面是每一部分的结构说明。

### 前端文件架构



**前端文件架构说明**：
- **`assets/`**：存储logo等网页图片。
- **`components/`**：包含各种可复用的 UI 组件，如商品卡片、搜索栏、顶部和侧边栏等。
- **`router/`**：路由文件。
- **`stores/`**：储存静态变量。
- **`views/`**：每个 Vue 页面对应一个视图组件，负责页面的展示和逻辑处理。
- **`App.vue`**：根组件，整合了整个应用的布局和路由配置。
- **`main.ts`**：前端应用的入口文件，负责 Vue 实例的创建和插件的引入。

### 后端文件架构


**后端文件架构说明**：
- **`config/`**：配置跨域问题等。
- **`controller/`**：处理前端请求并返回响应，分为用户、商品、邮件等不同的控制器。
- **`service/`**：包含核心的业务逻辑，如用户服务、商品服务等。
- **`model/`**：数据模型层，定义了与数据库表结构对应的实体类。
- **`repository/`**：与数据库交互的层，处理数据库的增删改查操作。
- **`util/`**：一些常用的工具类，如邮件发送等。
- **`resources/`**：储存一些数据库、邮件的账号密码等配置文件。
- 
### 爬虫文件架构

**爬虫文件架构说明**：
- **`crawler_dd.py`**：负责爬取当当商品相关信息，如价格、商品名、图片等。
- **`crawler_snyg.py`**：负责爬取苏宁易购商品相关信息，如价格、商品名、图片等。
- **`html_crawler.py`**：负责与后端通信，开启服务。

---

以上是本次开发总结的详细内容，包括项目收获、常见 Bug 和文件架构的说明。
